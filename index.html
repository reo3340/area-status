<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>區域進度展示</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <h2>區域進度展示</h2>
    <div class="map-container">
        <object data="images/CTC_ELE.svg" type="image/svg+xml" id="map-svg"></object>
        <svg class="overlay-svg">
            <!-- 互動區域 -->
            <g class="interactive-areas">
                <path class="area" id="zone1" 
                    d="M430.95,332.77 L436.87,332.77 L436.87,337.96 L430.95,337.96 Z" 
                    data-name="第一區"/>
                <path class="area" id="zone2" 
                    d="M436.87,332.77 L470.74,332.77 L470.74,337.96 L436.87,337.96 Z" 
                    data-name="第二區"/>
                <path class="area" id="zone3" 
                    d="M430.95,337.96 L434.37,337.96 L434.37,346.35 L430.95,346.35 Z" 
                    data-name="第三區"/>
                <!-- 示例遮罩區域 -->
                <path class="area" id="mask1" 
                    d="M430.95,332.77 L436.87,332.77 L436.87,337.96 L430.95,337.96 Z" 
                    data-name="遮罩區域 1"/>
            </g>
        </svg>
        <div class="tooltip" id="tooltip"></div>
    </div>
    <div class="zoom-controls">
        <button class="zoom-btn" onclick="zoomIn()">+</button>
        <button class="zoom-btn" onclick="zoomOut()">-</button>
        <button class="zoom-btn" onclick="resetZoom()">重設</button>
    </div>
    <div id="loading">載入中...</div>

    <script src="js/main.js"></script>
    <script>
        let currentScale = 1.0;
        const mapSvg = document.getElementById('map-svg');
        const overlaySvg = document.querySelector('.overlay-svg');
        const interactiveAreas = document.querySelector('.interactive-areas');
        
        // 添加點擊事件來創建新的遮罩
        document.addEventListener('click', function(e) {
            // 檢查點擊是否在 SVG 區域內
            const rect = overlaySvg.getBoundingClientRect();
            if (e.target === overlaySvg || e.target === interactiveAreas) {
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // 創建一個新的遮罩區域（這裡使用一個簡單的矩形）
                const mask = document.createElementNS("http://www.w3.org/2000/svg", "path");
                const size = 50; // 遮罩大小
                const path = `M${x-size/2},${y-size/2} L${x+size/2},${y-size/2} L${x+size/2},${y+size/2} L${x-size/2},${y+size/2} Z`;
                
                mask.setAttribute("d", path);
                mask.setAttribute("class", "area");
                mask.setAttribute("id", "mask" + Date.now());
                mask.setAttribute("data-name", "新遮罩區域");
                
                interactiveAreas.appendChild(mask);
            }
        });

        function updateZoom() {
            mapSvg.style.width = (100 * currentScale) + '%';
            mapSvg.style.height = (100 * currentScale) + '%';
            overlaySvg.style.width = (100 * currentScale) + '%';
            overlaySvg.style.height = (100 * currentScale) + '%';
        }

        function zoomIn() {
            currentScale *= 1.2;
            updateZoom();
        }

        function zoomOut() {
            currentScale /= 1.2;
            if (currentScale < 1) currentScale = 1;
            updateZoom();
        }

        function resetZoom() {
            currentScale = 1.0;
            updateZoom();
        }

        // 初始化縮放
        updateZoom();
    </script>
</body>
</html>
